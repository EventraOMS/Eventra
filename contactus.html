<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="contactus.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Display:ital,wght@0,100..900;1,100..900&family=Outfit:wght@100..900&display=swap" rel="stylesheet">
    <title>Contact Us</title>
</head>

<body>
    <header>
        <nav>
            <ul>
                <li><a href="./home.html"><img height="25%" width="25%" src="./images/logo.png" alt="Eventra Logo"></a></li>
                <a href="./home.html"><li>Home</li></a>
                <a href="./About us.html"><li>About Us</li></a>
                <a href="./services.html"><li>Services</li></a>
                <a href="./portfolios.html"><li>Portfolios</li></a>
                <a href="./blog.html"><li>Blog</li></a>
                <a href="./contactus.html"><li>Contact Us</li></a>
                <a href="./index.html"><li>User</li></a>
            </ul>
        </nav>
        <hr>
        <h1>Get in touch with us today!</h1>
    </header>
    <center><div id="formContainer"><form id="contactForm" enctype="multipart/form-data">
        <label for="queryType">Select type of mail</label><br>
        <select name="queryType" id="queryType">
            <option value="Query">Query</option>
            <option value="Feedback">Feedback</option>
            <option value="Suggestions">Suggestions</option>
        </select>
        <br><br>
        <label for="email">Enter email ID</label> <br><input type="email" id="email"><br><br>
        <label for="email">Enter phone number</label> <br><input type="number" id="phone"><br><br>
        <label for="subject">Enter Subject</label> <br><input type="text" id="subject" maxlength="30"><br><br>
        <label for="content">Enter Details</label> <br><textarea name="content" id="content" rows="5" cols="40"
            maxlength="500"></textarea>
        <br><br><label for="attachment">Attach relevant files </label> <br><input type="file" id="attachment" name="attachment" accept=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png">
        <br><br><label for="copy">Do you need a copy?</label> <br><label for="yes">Yes</label><input type="radio" name="copy" id="yes"><br><label for="no">No</label><input type="radio" name="copy" id="no">
        <br><br><input type="submit">
    </form></div></center>
    <hr>
    
    <footer>
        <div class="griddivs">
            <img src="" alt="">
            <p>Eventra is a leading corporate event management company operating nationally from Mumbai, Delhi, Bangalore, Gurgaon, Pune and other cities in India</p>
            <h4>Contact Info</h4>
            <p>Address: F5-6, 5th floor, pinnacle Business park,shanti nagar, mahakali caves road andheri east mumbai-400093


                Email: info@cwe.in</p>
        </div>
        <div class="griddivs">
            <h4>Company</h4>
            <ul>
                <li><a href="./home.html">Home</a></li>
                <li><a href="./About us.html">About Us</a></li>
                <li><a href="./portfolios.html">Projects</a></li>
                <li><a href="./blog.html">Our Blog</a></li>
                <li><a href="./services.html">Our Services</a></li>
            </ul>
        </div>
        <div class="griddivs">
            <h4>Our Locations</h4>
            <img src="./images/ourlocations.webp" alt="">
            <h4>Folow Us on</h4>
            <div id="socialMediaLogos">
                    <img width="5%" height="5%" src="./images/Screenshot 2025-01-15 133424.png" alt="">
                    <img width="5%" height="5%" src="./images/yt.png" alt="">
                    <img width="5%" height="5%" src="./images/x.png" alt="">
                    <img width="5%" height="5%" src="./images/linkedin.png" alt="">
                    <img width="5%" height="5%" src="./images/insta.png" alt="">
            </div>
        </div>
    
    <p>Â© 2025 Eventra Events Management Company. All Rights Reserved.</p>
    </footer>
</body>
<script>
    window.onload = function () {
        document.getElementById("contactForm").onsubmit = async function (event) {
            event.preventDefault();
            
            let queryType = document.getElementById("queryType").value;
            let email = document.getElementById("email").value;
            let subject = document.getElementById("subject").value;
            let content = document.getElementById("content").value;
            let phone = document.getElementById("phone").value;
            let needsCopy = document.getElementById("yes").checked;
            let attachment = document.getElementById("attachment").files[0];

            let emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            let charRegex = /^[a-zA-Z0-9\s.,!?'"-]+$/; 
            let phoneRegex = /^[0-9]{10}$/; 

            let isValid = true;

            if (!emailRegex.test(email)) {
                alert("Invalid Email Address");
                isValid = false;
            }
            if (!charRegex.test(subject)) {
                alert("Subject should contain only letters, numbers, and basic punctuation.");
                isValid = false;
            }
            if (!charRegex.test(content)) {
                alert("Content should contain only letters, numbers, and basic punctuation.");
                isValid = false;
            }
            if (phone && !phoneRegex.test(phone)) {
                alert("Invalid Phone Number (Must be 10 digits)");
                isValid = false;
            }

            if (isValid) {
                try {
                    const formData = new FormData();
                    formData.append('queryType', queryType);
                    formData.append('email', email);
                    formData.append('phone', phone);
                    formData.append('subject', subject);
                    formData.append('content', content);
                    formData.append('needsCopy', needsCopy);
                    if (attachment) {
                        formData.append('attachment', attachment);
                    }

                    const response = await fetch('http://localhost:3002/api/submit-contact', {
                        method: 'POST',
                        body: formData
                    });

                    const data = await response.json();
                    if (data.success) {
                        alert("Form submitted successfully!");
                        document.getElementById("contactForm").reset();
                    } else {
                        alert("Error submitting form. Please try again.");
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert("Error submitting form. Please try again.");
                }
            }
        };
    };
</script>

</html>
